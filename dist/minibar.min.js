/*!
 * MiniBar 0.3.0
 * http://mobius.ovh/
 *
 * Released under the MIT license
 */
var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(i,j,o){i!=Array.prototype&&i!=Object.prototype&&(i[j]=o.value)},$jscomp.getGlobal=function(i){return"undefined"!=typeof window&&window===i?i:"undefined"!=typeof global&&null!=global?global:i},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.Symbol=function(){var i=0;return function(j){return $jscomp.SYMBOL_PREFIX+(j||"")+i++}}(),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var i=$jscomp.global.Symbol.iterator;i||(i=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[i]&&$jscomp.defineProperty(Array.prototype,i,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var i=$jscomp.global.Symbol.asyncIterator;i||(i=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator")),$jscomp.initSymbolAsyncIterator=function(){}},$jscomp.arrayIterator=function(i){var j=0;return $jscomp.iteratorPrototype(function(){return j<i.length?{done:!1,value:i[j++]}:{done:!0}})},$jscomp.iteratorPrototype=function(i){return $jscomp.initSymbolIterator(),i={next:i},i[$jscomp.global.Symbol.iterator]=function(){return this},i},$jscomp.makeIterator=function(i){$jscomp.initSymbolIterator(),$jscomp.initSymbol(),$jscomp.initSymbolIterator();var j=i[Symbol.iterator];return j?j.call(i):$jscomp.arrayIterator(i)},function(i){var U,j=window,o=document,s=o.body,H={x:"left",y:"top"},I={x:"width",y:"height"},J={x:"scrollLeft",y:"scrollTop"},K={x:"scrollWidth",y:"scrollHeight"},L={x:"pageX",y:"pageY"},M={barType:"default",minBarSize:10,alwaysShowBars:!1,horizontalMouseScroll:!1,scrollX:!0,scrollY:!0,navButtons:!1,scrollAmount:10,mutationObserver:{attributes:!1,childList:!0,subtree:!0},classes:{container:"mb-container",content:"mb-content",track:"mb-track",bar:"mb-bar",visible:"mb-visible",progress:"mb-progress",hover:"mb-hover",scrolling:"mb-scrolling",textarea:"mb-textarea",wrapper:"mb-wrapper",nav:"mb-nav",btn:"mb-button",btns:"mb-buttons",increase:"mb-increase",decrease:"mb-decrease"}},N=function(Z){for(var ba,_=Object(Z),aa=1;aa<arguments.length;aa++)if(ba=arguments[aa],null!=ba)for(var ca in ba)Object.prototype.hasOwnProperty.call(ba,ca)&&(_[ca]=ba[ca]);return _},O=function(Z,$,_){Z.addEventListener($,_,!1)},P=function(Z,$,_){if("[object Object]"===Object.prototype.toString.call(Z))for(var aa in Z)Object.prototype.hasOwnProperty.call(Z,aa)&&$.call(_,aa,Z[aa]);else{aa=0;for(var ba=Z.length;aa<ba;aa++)$.call(_,aa,Z[aa])}},Q=function(Z,$){var _=Z&&Z.style,aa="[object Object]"===Object.prototype.toString.call($);if(_){if(!$)return j.getComputedStyle(Z);aa&&P($,function(ba,ca){ba in _||(ba="-webkit-"+ba),_[ba]=ca+("string"==typeof ca?"":"opacity"===ba?"":"px")})}},R=function(Z){Z=Z.getBoundingClientRect();var $=o.documentElement||s.parentNode||s;return{x:Z.left+(void 0===j.pageXOffset?$.scrollLeft:j.pageXOffset),y:Z.top+(void 0===j.pageYOffset?$.scrollTop:j.pageYOffset),height:Math.round(Z.height),width:Math.round(Z.width)}},S=function(Z,$,_){var aa;return function(){var ba=this,ca=arguments,da=_&&!aa;clearTimeout(aa),aa=setTimeout(function(){aa=null,_||Z.apply(ba,ca)},$),da&&Z.apply(ba,ca)}},T=j.requestAnimationFrame||function(){var Z=0;return j.webkitRequestAnimationFrame||j.mozRequestAnimationFrame||function($){var _,aa=new Date().getTime();return _=Math.max(0,16-(aa-Z)),Z=aa+_,setTimeout(function(){$(aa+_)},_)}}();(U=j.cancelAnimationFrame)||(clearTimeout(void 0),U=void 0);var V=U,W=function(){var Z=0,$=o.createElement("div");return $.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",o.body.appendChild($),Z=$.offsetWidth-$.clientWidth,o.body.removeChild($),Z},X={contains:function(Z,$){if(Z)return Z.classList?Z.classList.contains($):!!Z.className&&!!Z.className.match(new RegExp("(\\s|^)"+$+"(\\s|$)"))},add:function(Z,$){X.contains(Z,$)||(Z.classList?Z.classList.add($):Z.className=Z.className.trim()+" "+$)},remove:function(Z,$){X.contains(Z,$)&&(Z.classList?Z.classList.remove($):Z.className=Z.className.replace(new RegExp("(^|\\s)"+$.split(" ").join("|")+"(\\s|$)","gi")," "))},toggle:function(Z,$,_){(_=this.contains(Z,$)?!0!==_&&"remove":!1!==_&&"add")&&this[_](Z,$)}};U=function(Z,$){this.container="string"==typeof Z?o.querySelector(Z):Z,this.config=M,$?this.config=N({},M,$):j.MiniBarOptions&&(this.config=N({},M,j.MiniBarOptions)),this.css=j.getComputedStyle(this.container),this.size=W(),this.textarea="textarea"===this.container.nodeName.toLowerCase(),this.bars={x:{},y:{}},this.tracks={x:{},y:{}},this.events={},P("update scroll mouseenter mousedown mousemove mouseup wheel".split(" "),function(_,aa){this.events[aa]=this[aa].bind(this)},this),this.events.debounce=S(this.events.update,50),this.init()};var Y=U.prototype;Y.init=function(){var Z=this,$=Z.config,_=Z.events;if(!Z.initialised){if(Z.textarea)Z.content=Z.container,Z.container=o.createElement("div"),X.add(Z.container,$.classes.textarea),Z.wrapper=o.createElement("div"),X.add(Z.wrapper,$.classes.wrapper),Z.container.appendChild(Z.wrapper),Z.content.parentNode.insertBefore(Z.container,Z.content),Z.content.addEventListener("input",function(){Z.update()});else for(Z.content=o.createElement("div");Z.container.firstChild;)Z.content.appendChild(Z.container.firstChild);X.add(Z.container,$.classes.container),X.add(Z.content,$.classes.content),$.alwaysShowBars&&X.add(Z.container,$.classes.visible),P(Z.tracks,function(aa,ba){if(Z.bars[aa].node=o.createElement("div"),ba.node=o.createElement("div"),X.add(ba.node,$.classes.track),X.add(ba.node,$.classes.track+"-"+aa),X.add(Z.bars[aa].node,$.classes.bar),ba.node.appendChild(Z.bars[aa].node),$.navButtons){var ca=o.createElement("button"),da=o.createElement("button"),ea=o.createElement("div"),fa=$.scrollAmount;ca.className=$.classes.btn+" "+$.classes.decrease,da.className=$.classes.btn+" "+$.classes.increase,ea.className=$.classes.btn+" "+$.classes.btn+"-"+aa,ea.appendChild(ca),ea.appendChild(ba.node),ea.appendChild(da),Z.container.appendChild(ea),X.add(Z.container,$.classes.nav),O(ea,"mousedown",function(ga){var ha=ga.target;if(V(Z.frame),ha===da||ha===ca){var ia=Z.content[J[aa]],ja=function(){switch(Z.content[J[aa]]=ia,ha){case ca:ia-=fa;break;case da:ia+=fa;}Z.frame=T(ja)};ja()}}),O(ea,"mouseup",function(ga){ga=ga.target;var ha=5*fa;V(Z.frame),ga!==da&&ga!==ca||Z.scrollBy(ga===ca?-ha:ha,aa)})}else Z.container.appendChild(ba.node);"progress"===$.barType?(X.add(ba.node,$.classes.progress),O(ba.node,"mousedown",_.mousedown)):O(Z.bars[aa].node,"mousedown",_.mousedown),O(ba.node,"mouseenter",function(){X.add(Z.container,$.classes.hover+"-"+aa)}),O(ba.node,"mouseleave",function(){Z.down||X.remove(Z.container,$.classes.hover+"-"+aa)})}),Z.textarea?Z.wrapper.appendChild(Z.content):Z.container.appendChild(Z.content),"static"===Z.css.position&&(Z.manualPosition=!0,Z.container.style.position="relative"),Z.update(),O(Z.content,"scroll",_.scroll),O(Z.container,"mouseenter",_.mouseenter),$.horizontalMouseScroll&&O(Z.content,"wheel",_.wheel),O(j,"resize",_.debounce),O(o,"DOMContentLoaded",_.update),O(j,"load",_.update),"MutationObserver"in window&&(Z=this,this.observer=new MutationObserver(function(aa){for(var ca=$jscomp.makeIterator(aa),da=ca.next();!da.done;da=ca.next())"childList"==da.value.type&&Z.update()}),this.observer.observe(this.content,this.config.mutationObserver)),Z.initialised=!0}},Y.scroll=function(){this.updateBars()},Y.scrollBy=function(Z,$,_,aa){if($=$||"y",0===_)this.content[J[$]]+=Z;else{void 0===_&&(_=250),aa=aa||function(fa,ga,ha,ia){return fa/=ia,-ha*fa*(fa-2)+ga};var ba=this,ca=Date.now(),da=ba.content[J[$]],ea=function(){var fa=Date.now()-ca;fa>_?V(ba.frame):(ba.content[J[$]]=aa(fa,da,Z,_),ba.frame=T(ea))};ea()}},Y.wheel=function(Z){Z.preventDefault(),this.scrollBy(100*Z.deltaY,"x")},Y.mouseenter=function(){this.updateBars()},Y.mousedown=function(Z){Z.preventDefault();var $=this.config,_=Z.target===this["progress"===$.barType?"tracks":"bars"].x.node?"x":"y";this.down=!0,this.currentAxis=_,this.update(),X.add(this.container,$.classes.visible),X.add(this.container,$.classes.scrolling+"-"+_),"progress"===$.barType?(this.origin={x:Z.pageX-this.tracks[_].x,y:Z.pageY-this.tracks[_].y},this.mousemove(Z)):this.origin={x:Z.pageX-this.bars[_].x,y:Z.pageY-this.bars[_].y},O(o,"mousemove",this.events.mousemove),O(o,"mouseup",this.events.mouseup)},Y.mousemove=function(Z){Z.preventDefault();var $=this,_=this.origin,aa=this.currentAxis,ba=$.tracks[aa],ca="progress"===$.config.barType;Z=(ca?Z[L[aa]]-ba[aa]:Z[L[aa]]-_[aa]-ba[aa])/ba[I[aa]];var da=ca?Z*($.content[K[aa]]-$.rect[I[aa]]):Z*$[K[aa]];T(function(){$.content[J[aa]]=da})},Y.mouseup=function(Z){var $=this.config,_=this.events;X.toggle(this.container,$.classes.visible,$.alwaysShowBars),X.remove(this.container,$.classes.scrolling+"-"+this.currentAxis),X.contains(Z.target,$.classes.bar)||(X.remove(this.container,$.classes.hover+"-x"),X.remove(this.container,$.classes.hover+"-y")),this.currentAxis=null,this.down=!1,o.removeEventListener("mousemove",_.mousemove),o.removeEventListener("mouseup",_.mouseup)},Y.update=function(){var Z=this,$=Z.config,_=Z.content,aa=Z.size;Z.rect=R(Z.container),Z.scrollTop=_.scrollTop,Z.scrollLeft=_.scrollLeft,Z.scrollHeight=_.scrollHeight,Z.scrollWidth=_.scrollWidth;var ba=Z.scrollWidth>Z.rect.width&&!Z.textarea,ca=Z.scrollHeight>Z.rect.height;X.toggle(Z.container,"mb-scroll-x",ba&&$.scrollX),X.toggle(Z.container,"mb-scroll-y",ca&&$.scrollY),Q(_,{overflowX:ba?"auto":"",overflowY:ca?"auto":"",marginBottom:ba?-aa:"",paddingBottom:ba?aa:"",marginRight:ca?-aa:"",paddingRight:ca?aa:""}),Z.scrollX=ba,Z.scrollY=ca,P(Z.tracks,function(da,ea){N(ea,R(ea.node)),N(Z.bars[da],R(Z.bars[da].node))}),Z.updateBars(),Z.wrapperPadding=0,Z.textarea&&($=Q(Z.wrapper),Z.wrapperPadding=parseInt($.paddingTop,10)+parseInt($.paddingBottom,10),!Z.down&&Z.content.selectionStart>=Z.content.value.length&&(Z.content.scrollTop=Z.scrollHeight+1E3))},Y.updateBar=function(Z){var $=this,_={},aa=$.config,ba=$.tracks[Z][I[Z]],ca=$.rect[I[Z]]-$.wrapperPadding,da=ba/$[K[Z]],ea=$.content[J[Z]]/($[K[Z]]-ca);"progress"===aa.barType?_[I[Z]]=Math.floor(ba*ea):(_[I[Z]]=Math.max(Math.floor(da*ca),aa.minBarSize),_[H[Z]]=Math.floor((ba-_[I[Z]])*ea)),T(function(){Q($.bars[Z].node,_)})},Y.updateBars=function(){P(this.bars,function(Z){this.updateBar(Z)},this)},Y.destroy=function(){var Z=this.config,$=this.container;if(this.initialised){for($.removeEventListener("mouseenter",this.events.mouseenter),j.removeEventListener("resize",this.events.debounce),X.remove($,Z.classes.visible),X.remove($,Z.classes.container),X.remove($,Z.classes.nav),P(this.tracks,function(_,aa){$.removeChild(Z.navButtons?aa.node.parentNode:aa.node),X.remove($,"mb-scroll-"+_)});this.content.firstChild;)$.appendChild(this.content.firstChild);$.removeChild(this.content),this.manualPosition&&($.style.position=""),this.bars={x:{},y:{}},this.tracks={x:{},y:{}},this.content=null,this.initialised=!1}},i.MiniBar=U}(this);